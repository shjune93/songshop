package com.songsite.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.Id;



import com.songsite.enums.Authority;
import com.songsite.enums.Gender;
import com.songsite.enums.LoginType;

import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;
import lombok.ToString;

@Entity //개체인식
@Setter //setter생성
@Getter //getter생성
@ToString(exclude = "password") //비밀번호제외한 toString 자동생성
@NoArgsConstructor //파라미터가 없는 기본 생성자를 생성
public class Customer extends AbstractEntity {

	@Id // PK 키설정
	@Column(nullable=false, length=20 ,unique=true)
	private String id;
	private String password;
	private String name;
	private String email = "";
	private String address = "";

	// 권한 (기본값 : BUYER(구매자))
	@Enumerated(EnumType.STRING)
	private Authority authority = Authority.BUYER;

	// 성별 (기본값 : NOTVERIFIABLE(미설정))
	@Enumerated(EnumType.STRING)
	private Gender gender = Gender.NOTVERIFIABLE;

	// 회원가입 타입 (기본값 : USERJSHOP(홈페이지 가입))
	@Enumerated(EnumType.STRING)
	private LoginType loginType = LoginType.USERJSHOP;

	// 아이디&비밀번호 확인 (로그인)
	public boolean machAccount(Customer newAccount) {
		if (newAccount == null) {
			return false;
		}
		return this.id.equals(newAccount.id) && this.password.equals(newAccount.password);
	}

	// 계정 수정
	public void update(Customer newAccount) {
		this.email = newAccount.email;
		this.name = newAccount.name;
		this.gender = newAccount.gender;
		this.address = newAccount.address;
	}

	// sns 가입 할경우 아이디,이름 저장
	public Customer(String id, String name, LoginType loginType) {
		this.id = id;
		this.name = name;
		this.loginType = loginType;
	}

	// 회원 가입
	public void create(Customer newAccount) {
		this.password = newAccount.password;
		this.id = newAccount.id;
		this.name = newAccount.name;
	}

}
